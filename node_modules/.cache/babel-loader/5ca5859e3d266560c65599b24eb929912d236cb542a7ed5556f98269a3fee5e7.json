{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\Documents\\\\GitHub\\\\Campuscrush\\\\src\\\\pages\\\\VerificationUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { auth, db } from '../firebase/firebaseConfig';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function VerificationUpload() {\n  _s();\n  const [idCard, setIdCard] = useState(null);\n  const [selfie, setSelfie] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const navigate = useNavigate();\n\n  // Helper function to convert file to base64\n  const toBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  };\n  const handleUpload = async () => {\n    if (!idCard || !selfie) {\n      alert(\"Please upload both ID card and selfie.\");\n      return;\n    }\n    try {\n      setUploading(true);\n      const user = auth.currentUser;\n      if (!user) return;\n      const idCardBase64 = await toBase64(idCard);\n      const selfieBase64 = await toBase64(selfie);\n      const userRef = doc(db, 'users', user.uid);\n      await updateDoc(userRef, {\n        verification: {\n          idCard: idCardBase64,\n          selfie: selfieBase64,\n          verified: false,\n          submittedAt: new Date()\n        }\n      });\n      alert(\"Verification submitted! Please wait for admin approval.\");\n      navigate('/');\n    } catch (err) {\n      console.error(err);\n      alert(\"Upload failed. Please try again.\");\n    } finally {\n      setUploading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      children: \"\\uD83E\\uDEAA Student Verification\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*,application/pdf\",\n      className: \"mb-3\",\n      onChange: e => setIdCard(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"text-sm text-gray-600 mb-3\",\n      children: \"Upload your Student ID\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      className: \"mb-3\",\n      onChange: e => setSelfie(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"text-sm text-gray-600 mb-3\",\n      children: \"Upload your Selfie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      disabled: uploading,\n      className: \"bg-pink-500 text-white px-6 py-2 rounded mt-4 hover:bg-pink-600\",\n      children: uploading ? 'Uploading...' : 'Submit Verification'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(VerificationUpload, \"xk4qBB/tsYmLg/5pBDkLT9r8/YM=\", false, function () {\n  return [useNavigate];\n});\n_c = VerificationUpload;\nvar _c;\n$RefreshReg$(_c, \"VerificationUpload\");","map":{"version":3,"names":["React","useState","auth","db","doc","updateDoc","useNavigate","jsxDEV","_jsxDEV","VerificationUpload","_s","idCard","setIdCard","selfie","setSelfie","uploading","setUploading","navigate","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","handleUpload","alert","user","currentUser","idCardBase64","selfieBase64","userRef","uid","verification","verified","submittedAt","Date","err","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","e","target","files","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/User/OneDrive/Documents/GitHub/Campuscrush/src/pages/VerificationUpload.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { auth, db } from '../firebase/firebaseConfig';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function VerificationUpload() {\r\n  const [idCard, setIdCard] = useState(null);\r\n  const [selfie, setSelfie] = useState(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Helper function to convert file to base64\r\n  const toBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => resolve(reader.result);\r\n      reader.onerror = (error) => reject(error);\r\n    });\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!idCard || !selfie) {\r\n      alert(\"Please upload both ID card and selfie.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setUploading(true);\r\n      const user = auth.currentUser;\r\n      if (!user) return;\r\n\r\n      const idCardBase64 = await toBase64(idCard);\r\n      const selfieBase64 = await toBase64(selfie);\r\n\r\n      const userRef = doc(db, 'users', user.uid);\r\n      await updateDoc(userRef, {\r\n        verification: {\r\n          idCard: idCardBase64,\r\n          selfie: selfieBase64,\r\n          verified: false,\r\n          submittedAt: new Date(),\r\n        }\r\n      });\r\n\r\n      alert(\"Verification submitted! Please wait for admin approval.\");\r\n      navigate('/');\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Upload failed. Please try again.\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50\">\r\n      <h2 className=\"text-xl font-bold mb-4\">ðŸªª Student Verification</h2>\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*,application/pdf\"\r\n        className=\"mb-3\"\r\n        onChange={(e) => setIdCard(e.target.files[0])}\r\n      />\r\n      <label className=\"text-sm text-gray-600 mb-3\">Upload your Student ID</label>\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        className=\"mb-3\"\r\n        onChange={(e) => setSelfie(e.target.files[0])}\r\n      />\r\n      <label className=\"text-sm text-gray-600 mb-3\">Upload your Selfie</label>\r\n\r\n      <button\r\n        onClick={handleUpload}\r\n        disabled={uploading}\r\n        className=\"bg-pink-500 text-white px-6 py-2 rounded mt-4 hover:bg-pink-600\"\r\n      >\r\n        {uploading ? 'Uploading...' : 'Submit Verification'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}